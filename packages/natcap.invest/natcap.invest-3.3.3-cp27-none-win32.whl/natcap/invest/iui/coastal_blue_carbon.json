{
  "id": "window",
  "label": "Coastal Blue Carbon",
  "targetScript": "natcap.invest.coastal_blue_carbon.coastal_blue_carbon",
  "modelName": "coastal_blue_carbon",
  "localDocURI": "../documentation/coastal_blue_carbon.html",
  "height": 800,
  "width": 700,
  "elements": [
    {
      "id": "workspace_list",
      "type": "list",
      "elements": [
        {
          "id": "workspace",
          "args_id": "workspace_dir",
          "type": "folder",
          "label": "Workspace",
          "defaultValue": "~/Documents/coastal_blue_carbon_workspace",
          "helpText": "The selected folder is used as the workspace where all intermediate and final output files will be written. If the selected folder does not exist, it will be created. If datasets already exist in the selected folder, they will be overwritten.",
          "required": true
        },
        {
          "id": "results_suffix",
          "args_id": "results_suffix",
          "type": "text",
          "dataType": "string",
          "label": "Results Suffix (Optional)",
          "defaultValue": "",
          "required": false,
          "helpText": "This text will be appended to the end of the yield function output folders to help separate outputs from multiple runs."
        },
        {
          "id": "lulc_lookup_uri",
          "args_id": "lulc_lookup_uri",
          "type": "file",
          "label": "LULC Lookup Table (CSV)",
          "defaultValue": "../CoastalBlueCarbon/inputs/lulc_lookup.csv",
          "required": true,
          "validateAs": {
            "type": "CSV",
            "fieldsExist": [
              "lulc-class",
              "code",
              "is_coastal_blue_carbon_habitat"
            ]
          },
          "helpText": "A CSV table used to map lulc classes to their values in a raster and to indicate whether or not the lulc class is a coastal blue carbon habitat."
        },
        {
          "id": "lulc_transition_matrix_uri",
          "args_id": "lulc_transition_matrix_uri",
          "type": "file",
          "label": "LULC Transition Effect of Carbon Table (CSV)",
          "defaultValue": "../CoastalBlueCarbon/outputs_preprocessor/transitions_sample.csv",
          "required": true,
          "validateAs": {
            "type": "CSV",
            "fieldsExist": [
              "lulc-class"
            ]
          },
          "helpText": "Generated by the preprocessor. This file must be edited before it can be used by the main model. The left-most column represents the source lulc class, and the top row represents the destination lulc class."
        },
        {
          "id": "carbon_pool_initial_uri",
          "args_id": "carbon_pool_initial_uri",
          "type": "file",
          "label": "Carbon Pool Initial Variables Table (CSV)",
          "defaultValue": "../CoastalBlueCarbon/outputs_preprocessor/carbon_pool_initial_sample.csv",
          "required": true,
          "validateAs": {
            "type": "CSV",
            "fieldsExist": [
              "biomass",
              "soil"
            ]
          },
          "helpText": "The provided CSV table contains information related to the initial conditions of the carbon stock within each of the three pools of a habitat. Biomass includes carbon stored above and below ground. All non-coastal blue carbon habitat lulc classes are assumed to contain no carbon. The values for ‘biomass’, ‘soil’, and ‘litter’ should be given in terms of Megatonnes CO2e/ha."
        },
        {
          "id": "carbon_pool_transient_uri",
          "args_id": "carbon_pool_transient_uri",
          "type": "file",
          "label": "Carbon Pool Transient Variables Table (CSV)",
          "defaultValue": "../CoastalBlueCarbon/outputs_preprocessor/carbon_pool_transient_sample.csv",
          "required": true,
          "validateAs": {
            "type": "CSV",
            "fieldsExist": [
              "code",
              "lulc-class",
              "biomass-yearly-accumulation",
              "soil-yearly-accumulation",
              "biomass-half-life",
              "soil-half-life"
            ]
          },
          "helpText": "The provided CSV table contains information related to the transition of carbon into and out of coastal blue carbon pools. All non-coastal blue carbon habitat lulc classes are assumed to neither sequester nor emit carbon as a result of change. The ‘yearly_accumulation’ values should be given in terms of Megatonnes of CO2e/ha-yr. The ‘half-life’ values must be given in terms of years. The ‘disturbance’ values must be given as a decimal percentage of stock distrubed given a transition occurs away from a lulc-class."
       },
       {
         "id": "lulc_baseline_map_uri",
         "args_id": "lulc_baseline_map_uri",
         "type": "file",
         "label": "Baseline LULC Raster (GDAL-supported)",
         "defaultValue": "../CoastalBlueCarbon/inputs/GBJC_2004_mean_Resample.tif",
         "helpText": "A GDAL-supported raster representing the baseline landscape/seascape.",
         "required": true
       },
       {
            "id": "lulc_baseline_year",
            "args_id": "lulc_baseline_year",
            "type": "text",
            "label": "Year of baseline LULC raster",
            "defaultValue": "2004",
            "required": true,
            "validateAs": {
            "type": "number",
            "allowedValues": {
                "pattern": "^[0-9]+"
                }
            }
        }
      ]
    },
    {
      "id": "lulc_transition_maps_list",
      "type": "multi",
      "args_id": "lulc_transition_maps_list",
      "label": "Transition LULC Rasters (GDAL-supported)",
      "sampleElement": {
        "id": "sample_id",
        "type": "file",
        "label": "Input",
        "validateAs": {
          "type": "GDAL"
        }
      },
      "defaultValue": [
        "../CoastalBlueCarbon/inputs/GBJC_2050_mean_Resample.tif",
        "../CoastalBlueCarbon/inputs/GBJC_2100_mean_Resample.tif"
      ],
      "linkText": "Add Another",
      "helpText": "A set of GDAL-supported rasters representing the landscape/seascape at particular points in time. Provided in chronological order after baseline."
    },
    {
      "id": "lulc_transition_years_list",
      "type": "multi",
      "args_id": "lulc_transition_years_list",
      "label": "Transition Years",
      "sampleElement": {
        "id": "sample_id",
        "type": "text",
        "label": "Input",
        "validateAs": {
          "type": "number",
          "allowedValues": {
             "pattern": "^[0-9]+"
          }
        }
      },
      "defaultValue": [
        "2050",
        "2100"
      ],
      "linkText": "Add Another",
      "helpText": "Transition years must be entered in chronological order."
    },
    {
      "id": "analysis_year_list",
      "type": "list",
      "elements": [
        {
          "id": "analysis_year",
          "args_id": "analysis_year",
          "label": "Analysis Year (Optional)",
          "type": "text",
          "dataType": "string",
          "validateAs": {
            "type": "number",
            "allowedValues": {
               "pattern": "^[0-9]+"
            }
          },
          "defaultValue": "",
          "required": false,
          "helpText": "An analysis year extends the transient analysis beyond the transition years."
        }
      ]
    },
    {
      "id": "do_economic_analysis",
      "args_id": "do_economic_analysis",
      "label": "Calculate Net Present Value of Sequestered Carbon",
      "type": "container",
      "defaultValue": true,
      "required": true,
      "collapsible": true,
      "elements": [
        {
          "id": "economics_list",
          "type": "list",
          "elements": [
            {
              "id": "do_price_table",
              "args_id": "do_price_table",
              "type": "checkbox",
              "label": "Use Price Table",
              "required": true,
              "defaultValue": false,
              "helpText": ""
            },
            {
              "id": "price",
              "args_id": "price",
              "disabledBy": "do_price_table",
              "type": "text",
              "label": "Price",
              "defaultValue": "10.0",
              "required": true,
              "validateAs": {
                "type": "number"
              },
              "dataType": "float",
              "helpText": "The price per Megatonne CO2e at the base year."
            },
            {
              "id": "interest_rate",
              "args_id": "interest_rate",
              "disabledBy": "do_price_table",
              "type": "text",
              "label": "Interest Rate (%)",
              "defaultValue": "3.0",
              "required": true,
              "validateAs": {
                "type": "number"
              },
              "dataType": "float",
              "helpText": "The interest rate on the price per Megatonne CO2e, compounded yearly."
            },
            {
              "id": "price_table_uri",
              "args_id": "price_table_uri",
              "enabledBy": "do_price_table",
              "type": "file",
              "label": "Price Table (CSV)",
              "defaultValue": "../CoastalBlueCarbon/inputs/price_table.csv",
              "required": true,
              "validateAs": {
                "type": "CSV",
                "fieldsExist": [
                  "year",
                  "price"
                ]
              },
              "helpText": "Can be used in place of price and interest rate inputs. The provided CSV table contains the price per Megatonne CO2e sequestered for a given year, for all years from the original snapshot to the analysis year, if provided."
            },
            {
              "id": "discount_rate",
              "args_id": "discount_rate",
              "type": "text",
              "label": "Discount Rate (%)",
              "defaultValue": "6.0",
              "required": true,
              "validateAs": {
                "type": "number"
              },
              "dataType": "float",
              "helpText": "The discount rate on future valuations of sequestered carbon, compounded yearly."
            }
          ]
        }
      ]
    }
  ]
}
