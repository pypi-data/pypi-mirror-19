{
  "id": "window",
  "label": "Coastal Vulnerability Assessment Tool",
  "targetScript": "natcap.invest.coastal_vulnerability.coastal_vulnerability",
  "modelName": "coastal_vulnerability",
  "localDocURI": "../documentation/coastal_vulnerability.html",
  "height": 1200,
  "width": 1000,
  "elements": [
    {
      "id": "aesthetic_quality_tab_group",
      "type": "tabbedGroup",
      "elements": [
        {
          "id": "general_tab",
          "label": "General",
          "type": "tab",
          "enabled": true,
          "elements": [
            {
              "id": "coastal_vulnerability_general_list",
              "type": "list",
              "elements": [
                {
                  "label": "Output Area: Sheltered/Exposed?",
                  "id": "area_computed",
                  "args_id": "area_computed",
                  "type": "dropdown",
                  "defaultValue": "Both",
                  "options": [
                    "both",
                    "sheltered"
                  ],
                  "required": true,
                  "returns": "strings",
                  "helpText": "Determine if the output data is about all the coast or about sheltered segments only."
                },
                {
                  "label": "Workspace",
                  "id": "workspace",
                  "type": "folder",
                  "required": true,
                  "validateAs": {
                    "type": "folder"
                  },
                  "args_id": "workspace_dir",
                  "defaultValue": "~/Documents/coastal_vulnerability_workspace",
                  "helpText": "The selected folder is used as the workspace where all intermediate and output files will be written.<br><br>If the selected folder does not exist, it will be created.<br><br><b>If datasets already exist in the selected folder, they will be overwritten.</b>"
                },
                {
                  "id": "results_suffix",
                  "args_id": "suffix",
                  "type": "text",
                  "dataType": "string",
                  "label": "Results Suffix (Optional)",
                  "defaultValue": "",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "helpText": "A string that will be added to the end of the output file paths."
                },
                {
                  "label": "Area of Interest (Vector)",
                  "id": "area_of_interest",
                  "args_id": "aoi_uri",
                  "type": "file",
                  "required": true,
                  "defaultValue": "../CoastalProtection/Input/AOI_BarkClay.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "polygons",
                        "projection": {
                          "units": "meters",
                          "exists": true
                        }
                      }
                    ]
                  },
                  "helpText": "An OGR-supported, single-feature polygon vector file. All outputs will be in the AOI's projection."
                },
                {
                  "label": "Land Polygon (Vector)",
                  "id": "landmass_uri",
                  "args_id": "landmass_uri",
                  "type": "file",
                  "required": true,
                  "defaultValue": "../Base_Data/Marine/Land/global_polygon.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "polygons"
                      }
                    ]
                  },
                  "helpText": "An OGR-supported vector file containing a landmass polygon from where the coastline will be extracted. The default is the global land polygon."
                },
                {
                  "label": "Bathymetry Layer (Raster)",
                  "id": "bathymetry_layer",
                  "args_id": "bathymetry_uri",
                  "type": "file",
                  "required": true,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../Base_Data/Marine/DEMs/claybark_dem/hdr.adf",
                  "validateAs": {
                    "type": "GDAL"
                  },
                  "helpText": "A GDAL-supported raster of the terrain elevation in the area of interest. Used to compute depths along fetch rays, relief and surge potential."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "bathymetry_constant",
                  "args_id": "bathymetry_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Relief (Raster)",
                  "id": "relief",
                  "args_id": "relief_uri",
                  "type": "file",
                  "required": true,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../Base_Data/Marine/DEMs/claybark_dem/hdr.adf",
                  "validateAs": {
                    "type": "GDAL"
                  },
                  "helpText": "A GDAL-supported raster file containing the land elevation used to compute the average land elevation within a user-defined radius (see Elevation averaging radius)."
                },
                {
                  "label": "Layer Value If Path Omitted",
                  "id": "relief_constant",
                  "args_id": "relief_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Model Resolution (Segment Size)",
                  "id": "cell_size",
                  "args_id": "cell_size",
                  "type": "text",
                  "width": 70,
                  "required": true,
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "1000",
                  "helpText": "Cell size in meters. The higher the value, the faster the computation, but the coarser the output rasters produced by the model."
                },
                {
                  "label": "Depth Threshold (meters)",
                  "id": "depth_threshold",
                  "args_id": "depth_threshold",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "0",
                  "helpText": "Depth in meters (integer) cutoff to determine if fetch rays project over deep areas."
                },
                {
                  "label": "Exposure Proportion",
                  "id": "exposure_proportion",
                  "type": "text",
                  "args_id": "exposure_proportion",
                  "required": true,
                  "width": 60,
                  "defaultValue": "0.8",
                  "validateAs": {
                    "type": "number",
                    "lteq": 1,
                    "gteq": 0
                  },
                  "dataType": "float",
                  "helpText": "Minimum proportion of rays that project over exposed and/or deep areas need to classify a shore segment as exposed."
                },
                {
                  "label": "Geomorphology (Vector)",
                  "id": "geomorphology_uri",
                  "args_id": "geomorphology_uri",
                  "type": "file",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/Geomorphology_BarkClay.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "polygons"
                      }
                    ]
                  },
                  "helpText": "A OGR-supported polygon vector file that has a field called \"RANK\" with values between 1 and 5 in the attribute table."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "geomorphology_constant",
                  "args_id": "geomorphology_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Natural Habitats Directory",
                  "id": "habitats_directory_uri",
                  "args_id": "habitats_directory_uri",
                  "type": "folder",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/NaturalHabitat",
                  "helpText": "Directory containing OGR-supported polygon vectors associated with natural habitats. The name of these shapefiles should be suffixed with the ID that is specified in the natural habitats CSV file provided along with the habitats."
                },
                {
                  "label": "Natural Habitats Table (CSV)",
                  "id": "habitats_csv_uri",
                  "args_id": "habitats_csv_uri",
                  "type": "file",
                  "requiredIf": [
                    "habitats_directory_uri"
                  ],
                  "enabledBy": "habitats_directory_uri",
                  "defaultValue": "../CoastalProtection/Input/NaturalHabitat_WCVI.csv",
                  "validateAs": {
                    "type": "CSV"
                  },
                  "helpText": "A CSV file listing the attributes for each habitat. For more information, see 'Habitat Data Layer' section in the model's documentation.</a>."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "habitats_constant",
                  "args_id": "habitat_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Climatic Forcing Grid (Vector)",
                  "id": "climatic_forcing_uri",
                  "args_id": "climatic_forcing_uri",
                  "type": "file",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/WaveWatchIII.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "points"
                      }
                    ]
                  },
                  "helpText": "An OGR-supported vector containing both wind and wave information across the region of interest."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "climatic_forcing_constant",
                  "args_id": "climatic_forcing_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Continental Shelf (Vector)",
                  "id": "continental_shelf_uri",
                  "args_id": "continental_shelf_uri",
                  "type": "file",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/continentalShelf.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "polygons"
                      }
                    ]
                  },
                  "helpText": "An OGR-supported polygon vector delineating the edges of the continental shelf. Default is global continental shelf shapefile. If omitted, the user can specify depth contour. See entry below."
                },
                {
                  "label": "Depth Countour Level (meters)",
                  "id": "depth_contour",
                  "args_id": "depth_contour",
                  "type": "text",
                  "width": 60,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "required": false,
                  "dataType": "int",
                  "defaultValue": "150",
                  "helpText": "Used to delineate shallow and deep areas. Continental shelf limit is at about 150 meters."
                },
                {
                  "label": "Sea Level Rise (Vector)",
                  "id": "sea_level_rise_uri",
                  "args_id": "sea_level_rise_uri",
                  "type": "file",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/SeaLevRise_WCVI.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        }
                      }
                    ]
                  },
                  "helpText": "An OGR-supported point or polygon vector file containing features with \"Trend\" fields in the attributes table."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "sea_level_rise_constant",
                  "args_id": "sea_level_rise_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Structures (Vectors)",
                  "id": "structures_uri",
                  "args_id": "structures_uri",
                  "type": "file",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/Structures_BarkClay.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "polygon"
                      }
                    ]
                  },
                  "helpText": "An OGR-supported vector file containing rigid structures used to identify the portions of the coast that is armored."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "structures_constant",
                  "args_id": "structures_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                },
                {
                  "label": "Population Layer (Raster)",
                  "id": "population_uri",
                  "args_id": "population_uri",
                  "type": "file",
                  "required": true,
                  "defaultValue": "../Base_Data/Marine/Population/global_pop/w001001.adf",
                  "validateAs": {
                    "type": "GDAL"
                  },
                  "helpText": "A GDAL-supported raster file representing the population density."
                },
                {
                  "label": "Min. Population in Urban Centers",
                  "id": "urban_center_threshold",
                  "args_id": "urban_center_threshold",
                  "type": "text",
                  "width": 70,
                  "required": true,
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "5000",
                  "helpText": "Minimum population required to consider the shore segment a population center."
                },
                {
                  "label": "Additional Layer (Vector)",
                  "id": "additional_layer_uri",
                  "args_id": "additional_layer_uri",
                  "type": "file",
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "defaultValue": "../CoastalProtection/Input/SeaLevRise_WCVI.shp",
                  "validateAs": {
                    "type": "OGR",
                    "layers": [
                      {
                        "name": {
                          "inheritFrom": "file"
                        },
                        "type": "polygons"
                      }
                    ]
                  },
                  "helpText": "An OGR-supported vector file representing sea level rise, and will be used in the computation of coastal vulnerability and coastal vulnerability without habitat."
                },
                {
                  "label": "Layer Value if Path Omitted",
                  "id": "additional_layer_constant",
                  "args_id": "additional_layer_constant",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[1-5]",
                  "defaultValue": "",
                  "helpText": "Integer value between 1 and 5. If layer associated to this field is omitted, replace all shore points for this layer with a constant rank value in the computation of the coastal vulnerability index. If both the file and value for the layer are omitted, the layer is skipped altogether."
                }
              ]
            }
          ]
        },
        {
          "id": "advanced_tab",
          "label": "Advanced",
          "type": "tab",
          "enabled": true,
          "elements": [
            {
              "id": "coastal_vulnerability_advanced_list",
              "type": "list",
              "elements": [
                {
                  "label": "Elevation Averaging Radius (meters)",
                  "id": "elevation_averaging_radius",
                  "args_id": "elevation_averaging_radius",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "5000",
                  "helpText": "Distance in meters (integer). Each pixel average elevation will be computed within this radius."
                },
                {
                  "label": "Mean Sea Level Datum (meters)",
                  "id": "mean_sea_level_datum",
                  "args_id": "mean_sea_level_datum",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[-+]?[0-9]+",
                  "defaultValue": "0",
                  "helpText": "Height in meters (integer). This input is the elevation of Mean Sea Level (MSL) datum relative to the datum of the bathymetry layer. The model transforms all depths to MSL datum. A positive value means the MSL is higher than the bathymetry's zero (0) elevation, so the value is subtracted from the bathymetry."
                },
                {
                  "label": "Rays per Sector",
                  "id": "rays_per_sector",
                  "args_id": "rays_per_sector",
                  "type": "text",
                  "width": 70,
                  "required": true,
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "1",
                  "helpText": "Number of rays used to subsample the fetch distance within each of the 16 sectors."
                },
                {
                  "label": "Maximum Fetch Distance (meters)",
                  "id": "max_fetch",
                  "args_id": "max_fetch",
                  "type": "text",
                  "width": 70,
                  "required": false,
                  "returns": {
                    "ifEmpty": "pass"
                  },
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "12000",
                  "helpText": "Maximum fetch distance computed by the model (&gt;=60,000m)."
                },
                {
                  "label": "Coastal Overlap (meters)",
                  "id": "spread_radius",
                  "args_id": "spread_radius",
                  "type": "text",
                  "width": 70,
                  "required": true,
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "250",
                  "helpText": "Integer multiple of 'cell size'. The coast from the geomorphology layer could be of a better resolution than the global landmass, so the shores do not necessarily overlap. To make them coincide, the shore from the geomorphology layer is widened by 1 or more pixels. The value should be a multiple of 'cell size' that indicates how many pixels the coast from the geomorphology layer is widened. The widening happens on each side of the coast (n pixels landward, and n pixels seaward)."
                },
                {
                  "label": "Coastal Neighborhood (radius in meters)",
                  "id": "population_radius",
                  "args_id": "population_radius",
                  "type": "text",
                  "width": 70,
                  "required": true,
                  "dataType": "int",
                  "validText": "[0-9]+",
                  "defaultValue": "1000",
                  "helpText": "Radius length in meters used to count the number of people leaving close to the coast."
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
