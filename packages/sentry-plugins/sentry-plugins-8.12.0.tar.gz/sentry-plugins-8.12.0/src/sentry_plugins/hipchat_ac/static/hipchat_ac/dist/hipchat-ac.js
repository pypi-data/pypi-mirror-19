!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var a=e,l=t,o=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=l,n=o,r=!0,i=u=void 0}},u=n(1),c=r(u),f=n(2),d=n(3),p=r(d),h=function(e){function t(){a(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return l(t,e),i(t,[{key:"renderSettings",value:function(e){return c.default.createElement(p.default,o({plugin:this},e))}}]),t}(f.plugins.BasePlugin);h.displayName="Hipchat",f.plugins.add("hipchat-ac",h),t.default=h,e.exports=t.default},function(e,t){e.exports=React},function(e,t){e.exports=Sentry},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var a=e,l=t,o=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=l,n=o,r=!0,i=u=void 0}},s=n(1),u=r(s),c=n(2),f=function(e){function t(e){a(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onTest=this.onTest.bind(this),this.fetchData=this.fetchData.bind(this),Object.assign(this.state,{tenants:null,tenantsLoading:!0,tenantsError:!1})}return l(t,e),o(t,[{key:"fetchData",value:function(){var e=this;i(Object.getPrototypeOf(t.prototype),"fetchData",this).call(this),this.api.request(this.getPluginEndpoint()+"tenants/",{success:function(t){e.setState({tenants:t,tenantsLoading:!1,tenantsError:!1})},error:function(t){e.setState({tenantsLoading:!1,tenantsError:!0})}})}},{key:"onTest",value:function(){var e=this,t=c.IndicatorStore.add(c.i18n.t("Saving changes.."));this.api.request(this.getPluginEndpoint()+"test-config/",{method:"POST",success:function(t){e.setState({testResults:t})},error:function(t){e.setState({testResults:{error:!0,message:"An unknown error occurred while testing this integration."}})},complete:function(){c.IndicatorStore.remove(t)}})}},{key:"renderLink",value:function(e,t){var n=this.state.tenants;if(!n||!n.length)return t.onPremise?u.default.createElement("div",null,u.default.createElement("p",null,"Installing this integration will allow you to receive notifications for and assign team members to new Sentry errors within HipChat rooms. To install the integration, click the button below."),u.default.createElement("p",null,u.default.createElement("a",{href:e,className:"btn btn-primary",target:"_blank"},"Enable Integration"))):u.default.createElement("div",null,u.default.createElement("p",null,'To add the Sentry integration to HipChat click on "Install an integration from a descriptor URL" on your room in HipChat and add the following descriptor URL:'),u.default.createElement("pre",null,t.descriptor))}},{key:"renderTenants",value:function(e){var t=this,n=this.state.tenants;if(this.state.tenantsLoading)return u.default.createElement(c.LoadingIndicator,null);if(this.state.tenantsError)return u.default.createElement(c.LoadingError,{onRetry:this.fetchData});if(!n.length)return null;var r=this.props.plugin.isTestable;return u.default.createElement("div",null,u.default.createElement("h4",null,"Active Rooms"),u.default.createElement("table",{className:"table",style:{fontSize:14}},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"Room"),u.default.createElement("th",null,"By"),r&&u.default.createElement("th",null,"Test"))),u.default.createElement("tbody",null,n.map(function(e){return u.default.createElement("tr",{key:e.id},u.default.createElement("td",null,u.default.createElement("strong",null,e.room.name),u.default.createElement("br",null),u.default.createElement("small",null,"(id: ",e.room.id,"; owner: ",e.room.owner.name,")")),u.default.createElement("td",null,e.authUser&&e.authUser.username||"(unknown)"),r&&u.default.createElement("td",null,u.default.createElement("a",{className:"btn btn-default btn-sm",onClick:t.onTest},"Test")))}))),u.default.createElement("p",null,"To manage HipChat notifications or the rooms in which Sentry errors appear, visit the",u.default.createElement("a",{href:e,target:"_blank"}," integration configuration page"),"."),u.default.createElement("p",null,u.default.createElement("b",null,"Disabling the plugin here will delete all associations and will disable notifications to all HipChat Rooms")))}},{key:"render",value:function(){var e=this.props.plugin.metadata,t="/plugins/hipchat-ac/start/"+this.props.organization.slug+"/"+this.props.project.slug;return u.default.createElement("div",{className:"ref-hipchat-settings"},this.state.testResults&&u.default.createElement("div",{className:"ref-hipchat-test-results"},u.default.createElement("h4",null,"Test Results"),this.state.testResults.error?u.default.createElement("div",{className:"alert alert-block alert-error"},this.state.testResults.message):u.default.createElement("div",{className:"alert alert-block alert-success"},this.state.testResults.message)),this.renderLink(t,e),this.renderTenants(t))}}]),t}(c.plugins.BasePlugin.DefaultSettings);t.default=f,e.exports=t.default}]);
//# sourceMappingURL=hipchat-ac.js.map