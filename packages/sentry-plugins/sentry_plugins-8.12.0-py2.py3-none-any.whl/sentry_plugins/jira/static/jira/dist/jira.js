!function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(t,e,r){for(var n=!0;n;){var a=t,i=e,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;t=l,e=i,r=o,n=!0,u=l=void 0}},l=r(1),c=n(l),f=r(2),p=r(4),d=n(p),h=r(3),v=n(h),g=function(t){function e(){a(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return i(e,t),u(e,[{key:"renderSettings",value:function(t){return c.default.createElement(d.default,o({plugin:this},t))}},{key:"renderGroupActions",value:function(t){return c.default.createElement(v.default,o({plugin:this},t))}}]),e}(f.plugins.DefaultIssuePlugin);g.displayName="Jira",f.plugins.add("jira",g),e.default=g,t.exports=e.default},function(t,e){t.exports=React},function(t,e){t.exports=Sentry},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function(t,e,r){for(var n=!0;n;){var a=t,i=e,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;t=l,e=i,r=o,n=!0,u=l=void 0}},c=r(1),f=n(c),p=r(2),d=function(t){function e(){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return o(e,t),s(e,[{key:"changeField",value:function(t,e,r){var n=this,i=t+"FormData",o=u({},this.state[i],a({},e,r)),s=a({},i,o);return"issuetype"===e?(s.state=p.FormState.LOADING,void this.setState(s,this.onLoad.bind(this,function(){n.api.request(n.getPluginCreateEndpoint()+"?issue_type="+encodeURIComponent(r),{success:function(t){var e=n.state.createFormData,r={};t.forEach(function(t){var n=void 0;n=t.choices&&!t.choices.find(function(r){return r[0]===e[t.name]})?t.default:e[t.name]||t.default,r[t.name]=n}),n.setState({createFieldList:t,error:null,loading:!1,createFormData:r},n.onLoadSuccess)},error:n.errorHandler})}))):void this.setState(s)}},{key:"renderForm",value:function(){var t=this,r=void 0;return"create"===this.props.actionType?this.state.createFieldList&&!function(){var e=function(e){return e.has_autocomplete&&(e=Object.assign({url:"/api/0/issues/"+t.getGroup().id+"/plugins/"+t.props.plugin.slug+"/autocomplete"},e)),f.default.createElement("div",{key:e.name},t.renderField({config:e,formData:t.state.createFormData,onChange:t.changeField.bind(t,"create",e.name)}))},n=function(t){return null==t.required||t.required},a=t.state.createFieldList,i=a.filter(function(t){return n(t)}).map(function(t){return e(t)}),o=a.filter(function(t){return!n(t)}).map(function(t){return e(t)});r=f.default.createElement(p.Form,{onSubmit:t.createIssue,submitLabel:"Create Issue",footerClass:""},f.default.createElement("h5",null,"Required Fields"),i,o.length?f.default.createElement("h5",null,"Optional Fields"):null,o)}():r=l(Object.getPrototypeOf(e.prototype),"renderForm",this).call(this),r}}]),e}(p.plugins.DefaultIssuePlugin.DefaultIssueActions);e.default=d,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function(t,e,r){for(var n=!0;n;){var a=t,i=e,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,i);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;t=l,e=i,r=o,n=!0,u=l=void 0}},s=r(1),l=n(s),c=r(5),f=n(c),p=r(2),d=function(t){function e(t){a(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.PAGE_FIELD_LIST={0:["instance_url","username","password"],1:["default_project"],2:["ignored_fields","default_priority","default_issue_type","auto_create"]},this.back=this.back.bind(this),this.startEditing=this.startEditing.bind(this),this.isLastPage=this.isLastPage.bind(this),Object.assign(this.state,{page:0})}return i(e,t),o(e,[{key:"isConfigured",value:function(t){return t=t||this.state,!(!this.state.formData||!this.state.formData.default_project)}},{key:"isLastPage",value:function(){return 2===this.state.page}},{key:"fetchData",value:function(){var t=this;this.api.request(this.getPluginEndpoint(),{success:function(e){var r={},n={};e.config.forEach(function(t){r[t.name]=t.value||t.defaultValue,n[t.name]=t.value}),t.setState({fieldList:e.config,formData:r,initialData:n,editing:!(r&&r.default_project)},t.onLoadSuccess)},error:this.onLoadError})}},{key:"startEditing",value:function(){this.setState({editing:!0})}},{key:"onSubmit",value:function(){var t=this;if(f.default.isEqual(this.state.initialData,this.state.formData))return this.isLastPage()?this.setState({editing:!1,page:0}):this.setState({page:this.state.page+1}),void this.onSaveSuccess(this.onSaveComplete);var e=Object.assign({},this.state.formData);e.default_project!==this.state.initialData.default_project&&(e.default_issue_type=null,e.default_priority=null),this.api.request(this.getPluginEndpoint(),{data:e,method:"PUT",success:this.onSaveSuccess.bind(this,function(e){var r={},n={};e.config.forEach(function(t){r[t.name]=t.value||t.defaultValue,n[t.name]=t.value});var a={formData:r,initialData:n,errors:{},fieldList:e.config};t.isLastPage()?(a.editing=!1,a.page=0):a.page=t.state.page+1,t.setState(a)}),error:this.onSaveError.bind(this,function(e){t.setState({errors:(e.responseJSON||{}).errors||{}})}),complete:this.onSaveComplete})}},{key:"back",value:function(t){t.preventDefault(),this.state.state!==p.FormState.SAVING&&this.setState({page:this.state.page-1})}},{key:"render",value:function(){var t=this;if(this.state.state===p.FormState.LOADING)return l.default.createElement(p.LoadingIndicator,null);if(this.state.state===p.FormState.ERROR&&!this.state.fieldList)return l.default.createElement("div",{className:"alert alert-error m-b-1"},"An unknown error occurred. Need help with this? ",l.default.createElement("a",{href:"https://sentry.io/support/"},"Contact support"));var e=this.state.state===p.FormState.SAVING,r=void 0,n=void 0,a=void 0;return this.state.editing?(r=this.state.fieldList.filter(function(e){return t.PAGE_FIELD_LIST[t.state.page].includes(e.name)}),n=this.onSubmit,a=this.isLastPage()?"Finish":"Save and Continue"):(r=this.state.fieldList.map(function(t){return Object.assign({},t,{readonly:!0})}),n=this.startEditing,a="Edit"),l.default.createElement(p.Form,{onSubmit:n,submitDisabled:e,submitLabel:a,extraButton:0===this.state.page?null:l.default.createElement("a",{href:"#",className:"btn btn-default pull-left"+(e?" disabled":""),onClick:this.back},"Back")},this.state.errors.__all__&&l.default.createElement("div",{className:"alert alert-block alert-error"},l.default.createElement("ul",null,l.default.createElement("li",null,this.state.errors.__all__))),r.map(function(e){return t.renderField({config:e,formData:t.state.formData,formErrors:t.state.errors,onChange:t.changeField.bind(t,e.name)})}))}}]),e}(p.plugins.BasePlugin.DefaultSettings);e.default=d,t.exports=e.default},function(t,e){t.exports=underscore}]);
//# sourceMappingURL=jira.js.map