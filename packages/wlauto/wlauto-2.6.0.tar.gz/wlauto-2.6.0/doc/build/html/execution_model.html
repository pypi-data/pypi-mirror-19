<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Framework Overview &#8212; Workload Automation 2.6.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Instrumentation Signal-Method Mapping" href="instrumentation_method_map.html" />
    <link rel="prev" title="Writing Extensions" href="writing_extensions.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="instrumentation_method_map.html" title="Instrumentation Signal-Method Mapping"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="writing_extensions.html" title="Writing Extensions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Workload Automation 2.6.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="framework-overview">
<h1>Framework Overview<a class="headerlink" href="#framework-overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="execution-model">
<h2>Execution Model<a class="headerlink" href="#execution-model" title="Permalink to this headline">¶</a></h2>
<p>At the high level, the execution model looks as follows:</p>
<a class="reference internal image-reference" href="_images/wa-execution.png"><img alt="_images/wa-execution.png" src="_images/wa-execution.png" style="width: 711.5px; height: 452.0px;" /></a>
<p>After some initial setup, the framework initializes the device, loads and initialized
instrumentation and begins executing jobs defined by the workload specs in the agenda. Each job
executes in four basic stages:</p>
<dl class="docutils">
<dt>setup</dt>
<dd>Initial setup for the workload is performed. E.g. required assets are deployed to the
devices, required services or applications are launched, etc. Run time configuration of the
device for the workload is also performed at this time.</dd>
<dt>run</dt>
<dd>This is when the workload actually runs. This is defined as the part of the workload that is
to be measured. Exactly what happens at this stage depends entirely on the workload.</dd>
<dt>result processing</dt>
<dd>Results generated during the execution of the workload, if there are any, are collected,
parsed and extracted metrics are passed up to the core framework.</dd>
<dt>teardown</dt>
<dd>Final clean up is performed, e.g. applications may closed, files generated during execution
deleted, etc.</dd>
</dl>
<p>Signals are dispatched (see <a class="reference internal" href="#signal-dispatch">signal_dispatch</a> below) at each stage of workload execution,
which installed instrumentation can hook into in order to collect measurements, alter workload
execution, etc.  Instrumentation implementation usually mirrors that of workloads, defining
setup, teardown and result processing stages for a particular instrument. Instead of a <code class="docutils literal"><span class="pre">run</span></code>,
instruments usually implement a <code class="docutils literal"><span class="pre">start</span></code> and a <code class="docutils literal"><span class="pre">stop</span></code> which get triggered just before and just
after a workload run.  However, the signal dispatch mechanism give a high degree of flexibility
to instruments allowing them to hook into almost any stage of a WA run (apart from the very
early initialization).</p>
<p>Metrics and artifacts generated by workloads and instrumentation are accumulated by the framework
and are then passed to active result processors. This happens after each individual workload
execution and at the end of the run. A result process may chose to act at either or both of these
points.</p>
</div>
<div class="section" id="control-flow">
<h2>Control Flow<a class="headerlink" href="#control-flow" title="Permalink to this headline">¶</a></h2>
<p>This section goes into more detail explaining the relationship between the major components of the
framework and how control passes between them during a run. It will only go through the major
transition and interactions and will not attempt to describe very single thing that happens.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the control flow for the <code class="docutils literal"><span class="pre">wa</span> <span class="pre">run</span></code> command which is the main functionality
of WA. Other commands are much simpler and most of what is described below does not
apply to them.</p>
</div>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">wlauto.core.entry_point</span></code> parses the command form the arguments and executes the run command
(<code class="docutils literal"><span class="pre">wlauto.commands.run.RunCommand</span></code>).</li>
<li>Run command initializes the output directory and creates a <code class="docutils literal"><span class="pre">wlauto.core.agenda.Agenda</span></code> based on
the command line arguments. Finally, it instantiates  a <code class="docutils literal"><span class="pre">wlauto.core.execution.Executor</span></code> and
passes it the Agenda.</li>
<li>The Executor uses the Agenda to create a <code class="docutils literal"><span class="pre">wlauto.core.configuraiton.RunConfiguration</span></code> fully
defines the configuration for the run (it will be serialised into <code class="docutils literal"><span class="pre">__meta</span></code> subdirectory under
the output directory.</li>
<li>The Executor proceeds to instantiate and install instrumentation, result processors and the
device interface, based on the RunConfiguration. The executor also initialise a
<code class="docutils literal"><span class="pre">wlauto.core.execution.ExecutionContext</span></code> which is used to track the current state of the run
execution and also serves as a means of communication between the core framework and the
extensions.</li>
<li>Finally, the Executor instantiates a <code class="docutils literal"><span class="pre">wlauto.core.execution.Runner</span></code>, initializes its job
queue with workload specs from the RunConfiguraiton, and kicks it off.</li>
<li>The Runner performs the run time initialization of the device and goes through the workload specs
(in the order defined by <code class="docutils literal"><span class="pre">execution_order</span></code> setting), running each spec according to the
execution model described in the previous section. The Runner sends signals (see below) at
appropriate points during execution.</li>
<li>At the end of the run, the control is briefly passed back to the Executor, which outputs a
summary for the run.</li>
</ol>
</div>
<div class="section" id="signal-dispatch">
<span id="id1"></span><h2>Signal Dispatch<a class="headerlink" href="#signal-dispatch" title="Permalink to this headline">¶</a></h2>
<p>WA uses the <a class="reference external" href="https://pypi.python.org/pypi/Louie/1.1">louie</a> (formerly, pydispatcher) library
for signal dispatch. Callbacks can be registered for signals emitted during the run. WA uses a
version of louie that has been modified to introduce priority to registered callbacks (so that
callbacks that are know to be slow can be registered with a lower priority so that they do not
interfere with other callbacks).</p>
<p>This mechanism is abstracted for instrumentation. Methods of an <code class="xref py py-class docutils literal"><span class="pre">wlauto.core.Instrument</span></code>
subclass automatically get hooked to appropriate signals based on their names when the instrument
is &#8220;installed&#8221; for the run. Priority can be specified by adding <code class="docutils literal"><span class="pre">very_fast_</span></code>, <code class="docutils literal"><span class="pre">fast_</span></code> ,
<code class="docutils literal"><span class="pre">slow_</span></code> or <code class="docutils literal"><span class="pre">very_slow_</span></code> prefixes to method names.</p>
<p>The full list of method names and the signals they map to may be viewed
<a class="reference internal" href="instrumentation_method_map.html#instrumentation-method-map"><span class="std std-ref">here</span></a>.</p>
<p>Signal dispatching mechanism may also be used directly, for example to dynamically register
callbacks at runtime or allow extensions other than <code class="docutils literal"><span class="pre">Instruments</span></code> to access stages of the run
they are normally not aware of.</p>
<p>The sending of signals is the responsibility of the Runner. Signals gets sent during transitions
between execution stages and when special evens, such as errors or device reboots, occur.</p>
<div class="section" id="see-also">
<h3>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="instrumentation_method_map.html">Instrumentation Signal-Method Mapping</a></li>
</ul>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Framework Overview</a><ul>
<li><a class="reference internal" href="#execution-model">Execution Model</a></li>
<li><a class="reference internal" href="#control-flow">Control Flow</a></li>
<li><a class="reference internal" href="#signal-dispatch">Signal Dispatch</a><ul>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="writing_extensions.html"
                        title="previous chapter">Writing Extensions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="instrumentation_method_map.html"
                        title="next chapter">Instrumentation Signal-Method Mapping</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/execution_model.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="instrumentation_method_map.html" title="Instrumentation Signal-Method Mapping"
             >next</a> |</li>
        <li class="right" >
          <a href="writing_extensions.html" title="Writing Extensions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Workload Automation 2.6.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, ARM Ltd.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>